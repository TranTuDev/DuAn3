<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Trading Journal</title>

    <link rel="stylesheet" href="/assets/css/trading-journal.css">

    <style>
       
    </style>
</head>

<body>


    <%- include('partials/header', { user: user }) %>

        <!-- ‚úçÔ∏è Add Entry -->
        <div class="tong">
            <div class="chu">
                <h2>üìò Trading Journal</h2>
            </div>
            <form action="/users/tradingjournal" method="post">
                <div class="form-group">
                    <label for="pair">C·∫∑p giao d·ªãch:</label>
                    <input type="text" class="form-control" name="cap_trade" id="pair" required>
                </div>

                <div class="form-group">
                    <label for="direction">Chi·ªÅu l·ªánh:</label>
                    <select id="direction" name="chieu_lenh" required>
                        <option value="long">Long</option>
                        <option value="short">Short</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="entry">Entry:</label>
                    <input type="number" class="form-control" name="vao_entry" id="entry" required>
                </div>

                <div class="form-group">
                    <label for="tp">TP:</label>
                    <input type="number" class="form-control" name="dat_tp" id="tp">
                </div>

                <div class="form-group">
                    <label for="sl">SL:</label>
                    <input type="number" class="form-control" name="dinh_sl" id="sl">
                </div>

                <div class="form-group">
                    <label for="do">Volum Giao D·ªãch $</label>
                    <input type="number" class="form-control" name="tien_volum" id="do">
                </div>




                <div class="form-group">
                    <label for="result">Ng√†y V√† Th·ªùi Gian Giao D·ªãch</label>
                    <input type="datetime-local" class="form-control" name="date_trade" required>
                </div>

                <div class="form-group">
                    <label for="result">K·∫øt qu·∫£:</label>
                    <select id="result" name="ket_qua" required>
                        <option value="win">Win</option>
                        <option value="loss">Loss</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="note">Ghi ch√∫:</label>
                    <textarea id="note" rows="3" name="ghi_chu"></textarea>
                </div>

                <button type="submit" class="btn btn-primary">+ Th√™m L·ªánh</button>
            </form>


            <!-- üîç Search -->
            <div class="search-bar">
                <form method="GET" action="/users/tradingjournal">
                    <input type="text" name="search" placeholder="T√¨m theo c·∫∑p coin..."
                        value="<%= typeof search !== 'undefined' ? search : '' %>">
                    <select name="result">
                        <option value="">T·∫•t c·∫£</option>
                        <option value="win" <%=result==='win' ? 'selected' : '' %>>Win</option>
                        <option value="loss" <%=result==='loss' ? 'selected' : '' %>>Loss</option>
                    </select>
                    <button type="submit">L·ªçc</button>
                </form>
            </div>



            <table>
                <thead>
                    <tr>
                        <th>M√£ L·ªánh</th>
                        <th>C·∫∑p Giao D·ªãch</th>
                        <th>Chi·ªÅu L·ªánh</th>
                        <th>TP</th>
                        <th>SL</th>
                        <th>Volum</th>
                        <th>Ng√†y v√† Time Giao D·ªãch</th>
                        <th>K·∫øt Qu·∫£</th>
                        <th>Ghi Ch√∫</th>
                    </tr>
                </thead>
                <tbody>
                    <% trades.forEach(trade=> { %>
                        <tr>
                            <td>
                                <%= trade.ma_lenh %>
                            </td>
                            <td>
                                <%= trade.cap_trade %>
                            </td>
                            <td>
                                <%= trade.chieu_lenh %>
                            </td>
                            <td>
                                <%= trade.dat_tp %>
                            </td>
                            <td>
                                <%= trade.dinh_sl %>
                            </td>
                            <td>
                                <%= trade.tien_volum %>
                            </td>
                            <td>
                                <%= trade.date_trade.toLocaleString() %>
                            </td>
                            <td>
                                <%= trade.ket_qua %>
                            </td>
                            <td>
                                <%= trade.ghi_chu %>
                            </td>
                            <td>
                                <!-- S·ª≠a, X√≥a -->
                                <a href="/users/tradingjournal/edit/<%= trade.id %>">‚úèÔ∏è</a>
                                <form action="/users/tradingjournal/delete/<%= trade.id %>" method="post"
                                    style="display:inline;">
                                    <button type="submit" onclick="return confirm('Xo√° giao d·ªãch n√†y?')">‚ùå</button>
                                </form>
                            </td>
                        </tr>
                        <% }) %>
                </tbody>
            </table>

        </div>




        <!-- üìÑ Entry List -->
        <div class="entry-list" id="entryList"></div>


</body>

</html>